"use strict";function cov_2dbsw1qhpe(){var path="/Users/taojiang/Documents/work/redux_study/redux_/src/createStore.ts";var hash="320c84b0a071e404caace66c81585200b1f30c04";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/taojiang/Documents/work/redux_study/redux_/src/createStore.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:15,column:16},end:{line:15,column:25}},"2":{start:{line:19,column:20},end:{line:19,column:22}},"3":{start:{line:25,column:8},end:{line:25,column:33}},"4":{start:{line:26,column:8},end:{line:30,column:10}},"5":{start:{line:27,column:22},end:{line:27,column:49}},"6":{start:{line:28,column:12},end:{line:29,column:38}},"7":{start:{line:29,column:16},end:{line:29,column:38}},"8":{start:{line:38,column:23},end:{line:38,column:45}},"9":{start:{line:39,column:8},end:{line:39,column:25}},"10":{start:{line:40,column:18},end:{line:40,column:34}},"11":{start:{line:42,column:8},end:{line:43,column:29}},"12":{start:{line:43,column:12},end:{line:43,column:29}},"13":{start:{line:47,column:8},end:{line:47,column:21}},"14":{start:{line:50,column:4},end:{line:50,column:50}},"15":{start:{line:51,column:4},end:{line:51,column:45}},"16":{start:{line:53,column:0},end:{line:53,column:34}}},fnMap:{"0":{name:"createStore",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:41},end:{line:52,column:1}},line:11},"1":{name:"subscribe",decl:{start:{line:24,column:13},end:{line:24,column:22}},loc:{start:{line:24,column:33},end:{line:31,column:5}},line:24},"2":{name:"unsbuscribe",decl:{start:{line:26,column:24},end:{line:26,column:35}},loc:{start:{line:26,column:38},end:{line:30,column:9}},line:26},"3":{name:"dispatch",decl:{start:{line:37,column:13},end:{line:37,column:21}},loc:{start:{line:37,column:30},end:{line:44,column:5}},line:37},"4":{name:"getState",decl:{start:{line:46,column:13},end:{line:46,column:21}},loc:{start:{line:46,column:24},end:{line:48,column:5}},line:46}},branchMap:{"0":{loc:{start:{line:28,column:12},end:{line:29,column:38}},type:"if",locations:[{start:{line:28,column:12},end:{line:29,column:38}},{start:{line:28,column:12},end:{line:29,column:38}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0]},inputSourceMap:{version:3,file:"/Users/taojiang/Documents/work/redux_study/redux_/src/createStore.ts",sources:["/Users/taojiang/Documents/work/redux_study/redux_/src/createStore.ts"],names:[],mappings:";;AA+BA;;;;;;;GAOG;AAEH,SAAS,WAAW,CAAC,OAAgB,EAAE,SAAe;IACpD;;OAEG;IACH,IAAI,KAAK,GAAG,SAAS,CAAC;IAEtB;;OAEG;IACH,IAAI,SAAS,GAAe,EAAE,CAAC;IAE/B;;;OAGG;IACH,SAAS,SAAS,CAAC,QAAkB;QACnC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACxB,OAAO,SAAS,WAAW;YACzB,IAAI,GAAG,GAAW,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC9C,IAAI,GAAG,GAAG,CAAC,CAAC;gBAAE,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC,CAAA;IACH,CAAC;IAAA,CAAC;IAEF;;;OAGG;IACH,SAAS,QAAQ,CAAC,MAAiB;QACjC,IAAI,QAAQ,GAAG,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACtC,KAAK,GAAG,QAAQ,CAAC;QACjB,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC;QAC3B,sBAAsB;QACtB,OAAO,EAAE,GAAG,GAAG,CAAC,CAAC;YAAE,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC;IACtC,CAAC;IAAA,CAAC;IAEF,SAAS,QAAQ;QACf,OAAO,KAAK,CAAC;IACf,CAAC;IAED,8DAA8D;IAC9D,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,CAAA;IAE7C,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAA;AAC1C,CAAC;AAEe,kCAAW",sourcesContent:["\n\n\n\n\n/**\n * action\n */\ninterface AnyAction<S = any> {\n  type: string | number | Symbol;\n  [extraProps: string]: any;\n}\n\n/**\n * \u6BCF\u4E2Areducer \u90FD\u4F1A\u8FD4\u56DE\u4E00\u4E2Astate\u7684clone\uFF0C\u6765\u4EE3\u66FF\u65B0\u7684 state\n */\ntype Reducer = (state: any, action: AnyAction) => any;\n\n/** \u53D6\u6D88\u8BA2\u9605 */\ntype unsbuscribe = () => void;\n\n\n/**\n * Store \u5BF9\u8C61\n */\ninterface Store {\n  subscribe: (listener: Function) => unsbuscribe;\n  dispatch: (action: AnyAction) => void;\n  getState: () => any;\n}\n\n/**\n * \u9762\u5411\u51FD\u6570\u662F\u601D\u7EF4\n *  value \u5373\u662F state\n *  dispatch -> map\n *  \n * \u521B\u5EFA\u4E00\u4E2Astore\u5BB9\u5668,\u57FA\u4E8E\u53D1\u5E03\u8BA2\u6A21\u5F0F\u6765\u5904\u7406\uFF0Cdispatch\u6D3E\u53D1\u51FA\u7684action\u5904\u7406\u5BF9\u5E94\u7684reducer\n * \u6CE8\u610F:Action \u552F\u4E00\n */\n\nfunction createStore(reducer: Reducer, initState?: any): Store {\n  /**\n   *  \u72B6\u6001\u7BA1\u7406\n   */\n  let state = initState;\n\n  /**\n   * \u8BA2\u9605\u8005\u7684\u5217\u8868 \n   */\n  let listeners: Function[] = [];\n\n  /**\n   * \u89C2\u5BDF\u6D88\u606F\u8BA2\u9605\n   * @param listener \n   */\n  function subscribe(listener: Function) {\n    listeners.push(listener)\n    return function unsbuscribe() {\n      let del: number = listeners.indexOf(listener);\n      if (del > -1) listeners.splice(del);\n    }\n  };\n\n  /**\n   * \u6D3E\u53D1\u4E00\u4E2A action \u5BF9\u8C61\n   * @param action \n   */\n  function dispatch(action: AnyAction) {\n    let newState = reducer(state, action);\n    state = newState;\n    let len = listeners.length;\n    //reducer \u5904\u7406\u5B8C\u4E86\u4E4B\u540E\uFF0C\u56DE\u8C03\u8BA2\u9605\u8005\n    while (--len > -1) listeners[len]();\n  };\n\n  function getState(): any {\n    return state;\n  }\n\n  /**\u5728createStore \u88AB\u8C03\u7528\u7684\u65F6\u5019\u5148\u521D\u59CB\u5316\u6240\u6709\u7684reducer\uFF0C\u8FD9\u4E2A\u7684reducer\u662F\u7A7F\u900F\u7684\u6BCF\u4E2A\u90FD\u4F1A\u6267\u884C\u5230\u4F4D */\n  dispatch({ type: Symbol.for('initReuders') })\n\n  return { dispatch, subscribe, getState }\n}\n\nexport { Store, createStore, Reducer, AnyAction, unsbuscribe }"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"320c84b0a071e404caace66c81585200b1f30c04"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2dbsw1qhpe=function(){return actualCoverage;};return actualCoverage;}cov_2dbsw1qhpe();cov_2dbsw1qhpe().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});/**
 * 面向函数是思维
 *  value 即是 state
 *  dispatch -> map
 *
 * 创建一个store容器,基于发布订模式来处理，dispatch派发出的action处理对应的reducer
 * 注意:Action 唯一
 */function createStore(reducer,initState){cov_2dbsw1qhpe().f[0]++;/**
     *  状态管理
     */let state=(cov_2dbsw1qhpe().s[1]++,initState);/**
     * 订阅者的列表
     */let listeners=(cov_2dbsw1qhpe().s[2]++,[]);/**
     * 观察消息订阅
     * @param listener
     */function subscribe(listener){cov_2dbsw1qhpe().f[1]++;cov_2dbsw1qhpe().s[3]++;listeners.push(listener);cov_2dbsw1qhpe().s[4]++;return function unsbuscribe(){cov_2dbsw1qhpe().f[2]++;let del=(cov_2dbsw1qhpe().s[5]++,listeners.indexOf(listener));cov_2dbsw1qhpe().s[6]++;if(del>-1){cov_2dbsw1qhpe().b[0][0]++;cov_2dbsw1qhpe().s[7]++;listeners.splice(del);}else{cov_2dbsw1qhpe().b[0][1]++;}};};/**
     * 派发一个 action 对象
     * @param action
     */function dispatch(action){cov_2dbsw1qhpe().f[3]++;let newState=(cov_2dbsw1qhpe().s[8]++,reducer(state,action));cov_2dbsw1qhpe().s[9]++;state=newState;let len=(cov_2dbsw1qhpe().s[10]++,listeners.length);//reducer 处理完了之后，回调订阅者
cov_2dbsw1qhpe().s[11]++;while(--len>-1){cov_2dbsw1qhpe().s[12]++;listeners[len]();}};function getState(){cov_2dbsw1qhpe().f[4]++;cov_2dbsw1qhpe().s[13]++;return state;}/**在createStore 被调用的时候先初始化所有的reducer，这个的reducer是穿透的每个都会执行到位 */cov_2dbsw1qhpe().s[14]++;dispatch({type:Symbol.for('initReuders')});cov_2dbsw1qhpe().s[15]++;return{dispatch,subscribe,getState};}cov_2dbsw1qhpe().s[16]++;exports.createStore=createStore;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Rhb2ppYW5nL0RvY3VtZW50cy93b3JrL3JlZHV4X3N0dWR5L3JlZHV4Xy9zcmMvY3JlYXRlU3RvcmUudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90YW9qaWFuZy9Eb2N1bWVudHMvd29yay9yZWR1eF9zdHVkeS9yZWR1eF8vc3JjL2NyZWF0ZVN0b3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBK0JBOzs7Ozs7O0dBT0c7QUFFSCxTQUFTLFdBQVcsQ0FBQyxPQUFnQixFQUFFLFNBQWU7SUFDcEQ7O09BRUc7SUFDSCxJQUFJLEtBQUssR0FBRyxTQUFTLENBQUM7SUFFdEI7O09BRUc7SUFDSCxJQUFJLFNBQVMsR0FBZSxFQUFFLENBQUM7SUFFL0I7OztPQUdHO0lBQ0gsU0FBUyxTQUFTLENBQUMsUUFBa0I7UUFDbkMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUN4QixPQUFPLFNBQVMsV0FBVztZQUN6QixJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQTtJQUNILENBQUM7SUFBQSxDQUFDO0lBRUY7OztPQUdHO0lBQ0gsU0FBUyxRQUFRLENBQUMsTUFBaUI7UUFDakMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN0QyxLQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ2pCLElBQUksR0FBRyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUM7UUFDM0Isc0JBQXNCO1FBQ3RCLE9BQU8sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQUUsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7SUFDdEMsQ0FBQztJQUFBLENBQUM7SUFFRixTQUFTLFFBQVE7UUFDZixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRCw4REFBOEQ7SUFDOUQsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBRTdDLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxDQUFBO0FBQzFDLENBQUM7QUFFZSxrQ0FBVyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5cblxuXG4vKipcbiAqIGFjdGlvblxuICovXG5pbnRlcmZhY2UgQW55QWN0aW9uPFMgPSBhbnk+IHtcbiAgdHlwZTogc3RyaW5nIHwgbnVtYmVyIHwgU3ltYm9sO1xuICBbZXh0cmFQcm9wczogc3RyaW5nXTogYW55O1xufVxuXG4vKipcbiAqIOavj+S4qnJlZHVjZXIg6YO95Lya6L+U5Zue5LiA5Liqc3RhdGXnmoRjbG9uZe+8jOadpeS7o+abv+aWsOeahCBzdGF0ZVxuICovXG50eXBlIFJlZHVjZXIgPSAoc3RhdGU6IGFueSwgYWN0aW9uOiBBbnlBY3Rpb24pID0+IGFueTtcblxuLyoqIOWPlua2iOiuoumYhSAqL1xudHlwZSB1bnNidXNjcmliZSA9ICgpID0+IHZvaWQ7XG5cblxuLyoqXG4gKiBTdG9yZSDlr7nosaFcbiAqL1xuaW50ZXJmYWNlIFN0b3JlIHtcbiAgc3Vic2NyaWJlOiAobGlzdGVuZXI6IEZ1bmN0aW9uKSA9PiB1bnNidXNjcmliZTtcbiAgZGlzcGF0Y2g6IChhY3Rpb246IEFueUFjdGlvbikgPT4gdm9pZDtcbiAgZ2V0U3RhdGU6ICgpID0+IGFueTtcbn1cblxuLyoqXG4gKiDpnaLlkJHlh73mlbDmmK/mgJ3nu7RcbiAqICB2YWx1ZSDljbPmmK8gc3RhdGVcbiAqICBkaXNwYXRjaCAtPiBtYXBcbiAqICBcbiAqIOWIm+W7uuS4gOS4qnN0b3Jl5a655ZmoLOWfuuS6juWPkeW4g+iuouaooeW8j+adpeWkhOeQhu+8jGRpc3BhdGNo5rS+5Y+R5Ye655qEYWN0aW9u5aSE55CG5a+55bqU55qEcmVkdWNlclxuICog5rOo5oSPOkFjdGlvbiDllK/kuIBcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyOiBSZWR1Y2VyLCBpbml0U3RhdGU/OiBhbnkpOiBTdG9yZSB7XG4gIC8qKlxuICAgKiAg54q25oCB566h55CGXG4gICAqL1xuICBsZXQgc3RhdGUgPSBpbml0U3RhdGU7XG5cbiAgLyoqXG4gICAqIOiuoumYheiAheeahOWIl+ihqCBcbiAgICovXG4gIGxldCBsaXN0ZW5lcnM6IEZ1bmN0aW9uW10gPSBbXTtcblxuICAvKipcbiAgICog6KeC5a+f5raI5oGv6K6i6ZiFXG4gICAqIEBwYXJhbSBsaXN0ZW5lciBcbiAgICovXG4gIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcilcbiAgICByZXR1cm4gZnVuY3Rpb24gdW5zYnVzY3JpYmUoKSB7XG4gICAgICBsZXQgZGVsOiBudW1iZXIgPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoZGVsID4gLTEpIGxpc3RlbmVycy5zcGxpY2UoZGVsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIOa0vuWPkeS4gOS4qiBhY3Rpb24g5a+56LGhXG4gICAqIEBwYXJhbSBhY3Rpb24gXG4gICAqL1xuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb246IEFueUFjdGlvbikge1xuICAgIGxldCBuZXdTdGF0ZSA9IHJlZHVjZXIoc3RhdGUsIGFjdGlvbik7XG4gICAgc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICBsZXQgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAvL3JlZHVjZXIg5aSE55CG5a6M5LqG5LmL5ZCO77yM5Zue6LCD6K6i6ZiF6ICFXG4gICAgd2hpbGUgKC0tbGVuID4gLTEpIGxpc3RlbmVyc1tsZW5dKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0U3RhdGUoKTogYW55IHtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvKirlnKhjcmVhdGVTdG9yZSDooqvosIPnlKjnmoTml7blgJnlhYjliJ3lp4vljJbmiYDmnInnmoRyZWR1Y2Vy77yM6L+Z5Liq55qEcmVkdWNlcuaYr+epv+mAj+eahOavj+S4qumDveS8muaJp+ihjOWIsOS9jSAqL1xuICBkaXNwYXRjaCh7IHR5cGU6IFN5bWJvbC5mb3IoJ2luaXRSZXVkZXJzJykgfSlcblxuICByZXR1cm4geyBkaXNwYXRjaCwgc3Vic2NyaWJlLCBnZXRTdGF0ZSB9XG59XG5cbmV4cG9ydCB7IFN0b3JlLCBjcmVhdGVTdG9yZSwgUmVkdWNlciwgQW55QWN0aW9uLCB1bnNidXNjcmliZSB9Il19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YW9qaWFuZy9Eb2N1bWVudHMvd29yay9yZWR1eF9zdHVkeS9yZWR1eF8vc3JjL2NyZWF0ZVN0b3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJpaE1BK0JBOzs7Ozs7O0dBU0EsUUFBUyxDQUFBLFdBQVQsQ0FBcUIsT0FBckIsQ0FBdUMsU0FBdkMsQ0FBc0QseUJBQ3BEOztPQUdBLEdBQUksQ0FBQSxLQUFLLDBCQUFHLFNBQUgsQ0FBVCxDQUVBOztPQUdBLEdBQUksQ0FBQSxTQUFTLDBCQUFlLEVBQWYsQ0FBYixDQUVBOzs7T0FJQSxRQUFTLENBQUEsU0FBVCxDQUFtQixRQUFuQixDQUFxQyxpREFDbkMsU0FBUyxDQUFDLElBQVYsQ0FBZSxRQUFmLEVBRG1DLHdCQUVuQyxNQUFPLFNBQVMsQ0FBQSxXQUFULEVBQW9CLHlCQUN6QixHQUFJLENBQUEsR0FBRywwQkFBVyxTQUFTLENBQUMsT0FBVixDQUFrQixRQUFsQixDQUFYLENBQVAsQ0FEeUIsd0JBRXpCLEdBQUksR0FBRyxDQUFHLENBQUMsQ0FBWCxDQUFjLG9EQUFBLFNBQVMsQ0FBQyxNQUFWLENBQWlCLEdBQWpCLEVBQXNCLENBQXBDLGlDQUNELENBSEQsQ0FJRCxDQUFBLENBRUQ7OztPQUlBLFFBQVMsQ0FBQSxRQUFULENBQWtCLE1BQWxCLENBQW1DLHlCQUNqQyxHQUFJLENBQUEsUUFBUSwwQkFBRyxPQUFPLENBQUMsS0FBRCxDQUFRLE1BQVIsQ0FBVixDQUFaLENBRGlDLHdCQUVqQyxLQUFLLENBQUcsUUFBUixDQUNBLEdBQUksQ0FBQSxHQUFHLDJCQUFHLFNBQVMsQ0FBQyxNQUFiLENBQVAsQ0FDQTtBQUppQyx5QkFLakMsTUFBTyxFQUFFLEdBQUYsQ0FBUSxDQUFDLENBQWhCLENBQW1CLDBCQUFBLFNBQVMsQ0FBQyxHQUFELENBQVQsR0FBaUIsQ0FDckMsQ0FBQSxDQUVELFFBQVMsQ0FBQSxRQUFULEVBQWlCLGtEQUNmLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQ0FFRCw4REF2Q29ELHlCQXdDcEQsUUFBUSxDQUFDLENBQUUsSUFBSSxDQUFFLE1BQU0sQ0FBQyxHQUFQLENBQVcsYUFBWCxDQUFSLENBQUQsQ0FBUixDQXhDb0QseUJBMENwRCxNQUFPLENBQUUsUUFBRixDQUFZLFNBQVosQ0FBdUIsUUFBdkIsQ0FBUCxDQUNELEMseUJBRWUsT0FBQSxDQUFBLFdBQUEsQ0FBQSxXQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuXG5cblxuLyoqXG4gKiBhY3Rpb25cbiAqL1xuaW50ZXJmYWNlIEFueUFjdGlvbjxTID0gYW55PiB7XG4gIHR5cGU6IHN0cmluZyB8IG51bWJlciB8IFN5bWJvbDtcbiAgW2V4dHJhUHJvcHM6IHN0cmluZ106IGFueTtcbn1cblxuLyoqXG4gKiDmr4/kuKpyZWR1Y2VyIOmDveS8mui/lOWbnuS4gOS4qnN0YXRl55qEY2xvbmXvvIzmnaXku6Pmm7/mlrDnmoQgc3RhdGVcbiAqL1xudHlwZSBSZWR1Y2VyID0gKHN0YXRlOiBhbnksIGFjdGlvbjogQW55QWN0aW9uKSA9PiBhbnk7XG5cbi8qKiDlj5bmtojorqLpmIUgKi9cbnR5cGUgdW5zYnVzY3JpYmUgPSAoKSA9PiB2b2lkO1xuXG5cbi8qKlxuICogU3RvcmUg5a+56LGhXG4gKi9cbmludGVyZmFjZSBTdG9yZSB7XG4gIHN1YnNjcmliZTogKGxpc3RlbmVyOiBGdW5jdGlvbikgPT4gdW5zYnVzY3JpYmU7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBBbnlBY3Rpb24pID0+IHZvaWQ7XG4gIGdldFN0YXRlOiAoKSA9PiBhbnk7XG59XG5cbi8qKlxuICog6Z2i5ZCR5Ye95pWw5piv5oCd57u0XG4gKiAgdmFsdWUg5Y2z5pivIHN0YXRlXG4gKiAgZGlzcGF0Y2ggLT4gbWFwXG4gKiAgXG4gKiDliJvlu7rkuIDkuKpzdG9yZeWuueWZqCzln7rkuo7lj5HluIPorqLmqKHlvI/mnaXlpITnkIbvvIxkaXNwYXRjaOa0vuWPkeWHuueahGFjdGlvbuWkhOeQhuWvueW6lOeahHJlZHVjZXJcbiAqIOazqOaEjzpBY3Rpb24g5ZSv5LiAXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlcjogUmVkdWNlciwgaW5pdFN0YXRlPzogYW55KTogU3RvcmUge1xuICAvKipcbiAgICogIOeKtuaAgeeuoeeQhlxuICAgKi9cbiAgbGV0IHN0YXRlID0gaW5pdFN0YXRlO1xuXG4gIC8qKlxuICAgKiDorqLpmIXogIXnmoTliJfooaggXG4gICAqL1xuICBsZXQgbGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XG5cbiAgLyoqXG4gICAqIOinguWvn+a2iOaBr+iuoumYhVxuICAgKiBAcGFyYW0gbGlzdGVuZXIgXG4gICAqL1xuICBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVuc2J1c2NyaWJlKCkge1xuICAgICAgbGV0IGRlbDogbnVtYmVyID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGRlbCA+IC0xKSBsaXN0ZW5lcnMuc3BsaWNlKGRlbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiDmtL7lj5HkuIDkuKogYWN0aW9uIOWvueixoVxuICAgKiBAcGFyYW0gYWN0aW9uIFxuICAgKi9cbiAgZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uOiBBbnlBY3Rpb24pIHtcbiAgICBsZXQgbmV3U3RhdGUgPSByZWR1Y2VyKHN0YXRlLCBhY3Rpb24pO1xuICAgIHN0YXRlID0gbmV3U3RhdGU7XG4gICAgbGV0IGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgLy9yZWR1Y2VyIOWkhOeQhuWujOS6huS5i+WQju+8jOWbnuiwg+iuoumYheiAhVxuICAgIHdoaWxlICgtLWxlbiA+IC0xKSBsaXN0ZW5lcnNbbGVuXSgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCk6IGFueSB7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLyoq5ZyoY3JlYXRlU3RvcmUg6KKr6LCD55So55qE5pe25YCZ5YWI5Yid5aeL5YyW5omA5pyJ55qEcmVkdWNlcu+8jOi/meS4queahHJlZHVjZXLmmK/nqb/pgI/nmoTmr4/kuKrpg73kvJrmiafooYzliLDkvY0gKi9cbiAgZGlzcGF0Y2goeyB0eXBlOiBTeW1ib2wuZm9yKCdpbml0UmV1ZGVycycpIH0pXG5cbiAgcmV0dXJuIHsgZGlzcGF0Y2gsIHN1YnNjcmliZSwgZ2V0U3RhdGUgfVxufVxuXG5leHBvcnQgeyBTdG9yZSwgY3JlYXRlU3RvcmUsIFJlZHVjZXIsIEFueUFjdGlvbiwgdW5zYnVzY3JpYmUgfSJdfQ==